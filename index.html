<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.9.1/css/tachyons.min.css"/>

  <title>Chatter example</title>

  <style type="text/css">
    .hide:not(.hidden) {
        visibility: visible;
        opacity: 1;
        transition: opacity 0.3s, visibility 0.3s, translate 0.3s;
    }

    .hide.hidden {
        height: 0;
        visibility: hidden;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s, visibility 0.3s, translate 0.3s;
    }
  </style>

</head>
<body>

  <div class='center measure'>
    <h1 class='baskerville fw5'>Chatter example</h1>

    <p class="normal">Chatter is a statically generated comment engine.</p>

    <p class='normal lh-copy'>
      Try the comment box below. A refresh is needed to show your comment after posting.
      See the project on <a class='link dim mid-gray' href='https://github.com/joealcorn/chatter'>Github</a>.
    </p>

    <form class="pa4 black-80 comments">

      <div class='mb3'>
        <label for="comment" class="f6 b db mb2">Have something to say? <span class="normal black-60">Leave a comment</span></label>
        <textarea
          id="comment"
          name="comment"
          class="db border-box hover-black w-100 ba b--black-20 pa2 br2 mb2"
          aria-describedby="comment-desc"
          onfocus="var el = this.form.querySelector('.hidden'); if (el) el.classList.remove('hidden');"
          required=''
        ></textarea>
        <!-- <small id="comment-desc" class="f6 black-60"><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" class="link underline black-80 hover-blue" target='_blank' rel='noreferrer noopener'>Markdown</a> is available.</small> -->
      </div>

      <div class="hide hidden">
        <div class="measure">
          <div class="flex flex-wrap">

            <div class="dib mr2" style="flex-grow: 1">
              <label for="name" class="f6 b db mb2">Your name</label>
               <input id="name" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="text" aria-describedby="name-desc" required=''>
            </div>

            <div class="dib" style="flex-grow: 1">
              <label for="email" class="f6 b db mb2">Email <span class="normal black-60">(optional, not shared)</span></label>
              <input id="email" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="email" aria-describedby="email-desc">
            </div>

          </div>
        </div>

      </div>

      <input type='hidden' name='slug' value='gh-example' required readonly>
      <div class="mt3"><input class="b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6" type="submit" value="Submit"></div>

    </form>

    <!-- comments.js will render comments inside here -->
    <div class="comments"></div>

  </div>

  <script src='mustache.min.js'></script>
  <script src='comments.js' data-slug='gh-example' data-input-selector='form.comments' data-output-selector='div.comments'></script>

  <!-- mustache template for our comment rendering -->
  <script class="comment-template hidden" type="x-tmpl-mustache">
    <article id="c{{ comment.id }}" class="mw8 mw6-ns ba b--black-10 mv4">
      <div class="f4 bg-near-white black-60 mv0 pv2 ph3 flex">
        <span style='flex-grow: 1'>{{ comment.name }}</span>
        <a class='no-underline black-60 f5 lh-copy' href='#c{{ comment.id }}'>{{ comment.created_at_string }}</a>
      </div>
      <div class="pa3 bt b--black-10">
        <p class="f6 f5-ns lh-copy measure">{{ comment.text }}</p>
      </div>
    </article>
  </script>

</html>
